{% extends 'todolist/base.html' %}

<head>
    {% load static %}
</head>

{% block content %}
    {% if task_list %}
        <ul>
            {% for task in task_list %}
                <li>
                    <form id='task_form_{{ task.id }}' action="{% url 'todolist:complete_task' task.id %}" method="POST" class='task_flex_container'>
                        {% csrf_token %}

                        <input type='image' class='index_checkbox' id='task_{{ task.id }}' 
                        src='{% static 'todolist/images/checkbox1.png' %}' onmouseover='hover(this);' onmouseout='unhover(this);'>
                        
                        <div class='task_grid_container'>
                            <div>
                                <a href='{% url 'todolist:detail' task.id %}'>{{ task.name }}</a>
                            </div>
                            <div>
                                {{ task.group_names }}
                            </div>
                            <div>
                                {{ task.priority }}
                            </div>
                            <div>
                                {% if not task.is_outdated %}
                                    Do until {{ task.deadline }}
                                {% else %}
                                    <span class='outdated'>Outdated</span>
                                {% endif %}
                            </div>
                        </div>
                    </form>
                </li>
            {% endfor %}
        <ul>
    {% else %}
        <p style='text-align: center'>You dont have tasks for now.</p>
    {% endif %}

    <script>
        function hover(element) {
            element.setAttribute('src', '{% static 'todolist/images/checkbox2.png' %}');
        }
          
        function unhover(element) {
            element.setAttribute('src', '{% static 'todolist/images/checkbox1.png' %}');
        }
    </script>
{% endblock %}